<customer-modal [customerSelected]="customer" [newCustomer]="newCustomerName"></customer-modal>
<div class="container-fluid annies-paper">
    <div class="row-fluid">
        <div class="col-md-12">
            <h1>Sales Orders</h1>
            <div class="row">
                <fieldset class="form-group col-md-5">
                    <label for="ship-date">Ship Date</label>
                    <input type="text" (keyup)="shippingUpdate($event)" (focus)="setShowDatepicker(true)" [(ngModel)]="shipping.ship_date" class="form-control" id="ship-date" placeholder="Ship Date">
                    <datepicker class="datepicker-bg" [(ngModel)]="dt" onlyCurrentMonth="true" *ngIf="showDatepicker" (selectionDone)="setShipDate($event)"></datepicker>
                </fieldset>
            </div>
        </div>
        <div class="col-md-12">
            <customer-picker 
            (customerSelected)="selectedCustomer($event)"
            (customerInput) = "customerInput($event)"
            >
            
            </customer-picker>
        </div>
        <div class="row-fluid"  *ngIf="selectedFromList">
            <div class="col-md-6">
                <h2>Bill to</h2>
                <div (click)="collapseCustomer=!collapseCustomer">
                    <span *ngIf="collapseCustomer" class="glyphicon glyphicon-collapse-up"></span>
                    <span *ngIf="!collapseCustomer&&customer.name" class="glyphicon glyphicon-edit"></span>
                </div>
                <customer *ngIf="collapseCustomer" (updateCustomer)="customerUpdate($event)" [customer]="customer"></customer>
                <div class="container" *ngIf="!collapseCustomer">
                    <h4>{{ customer.name }} </h4>
                    <address>{{customer.address }}
                        <br/> {{ customer.city }} {{ customer.state }} {{ customer.zip }}
                    </address>
                    {{ customer.phone }} {{ customer.contact }}
                    <br/> {{ customer.email }}
                    <br/>
                    <br/>
                </div>
            </div>
            <div class="col-md-6">
                <h2>Ship to <a *ngIf="customer.name" class="same" (click)="setShipping()">Same as Bill to</a></h2>
                <div (click)="collapseShipping=!collapseShipping">
                    <span *ngIf="collapseShipping" class="glyphicon glyphicon-collapse-up"></span>
                    <span *ngIf="!collapseShipping&&shipping.client" class="glyphicon glyphicon-edit"></span>
                </div>
                <shipping 
        	        *ngIf="collapseShipping" 
        	        (updateShipping)="shippingUpdate($event)" 
        	        [shipping]="shipping" 
        	        [ship_date]="shipping.ship_date">	
                </shipping>
                <div class="container" *ngIf="!collapseShipping">
                    <h4>{{ shipping.client }} </h4>
                    <address>{{shipping.address }}
                        <br/> {{ shipping.city }} {{ shipping.state }} {{ shipping.zipcode }}
                    </address>
                    {{ shipping.phone }} {{ shipping.attention }}
                    <br/> {{ shipping.email }}
                    <br/>
                    <br/>
                </div>
            </div>
        </div>
        <div class="row-fluid" *ngIf="selectedFromList">
            <div class="col-xs-12">
                <products (selectedProduct)="mySelectedProduct($event)"></products>
            </div>
        </div>
        <div class="row-fluid" *ngIf="items.length>0">
            <div class="col-md-2 text-center">Quantity</div>
            <div class="col-md-2 text-center">Production Date</div>
            <div class="col-md-8 text-center">Description</div>
            <div class="col-md-12"></div>
        </div>
        <div class="row-fluid" *ngFor="let item of items">
            <fieldset class="form-group col-md-2">
                <input type="text" class="form-control" [(ngModel)]="item.quantity" id="qt" placeholder="Quantity">
            </fieldset>
            <fieldset class="form-group col-md-10">
                <input type="text" class="form-control" placeholder="item" [value]="item.name">
                <a (click)="deleteItem(item)" class="btn btn-link fa fa-remove btn-input"></a>
            </fieldset>
        </div>
        <div class="row-fluid">
            <div class="col-md-12 text-right">
                <div style="height:400px" class="form-group">
                    <br/>
                        <button type="button" class="btn btn-primary" (click)="onSubmit()">Go!</button>
                </div>
                <!-- <a class="btn btn-primary" (click)="onSubmit()">Submit</a> -->
            </div>
        </div>
    </div>
</div>